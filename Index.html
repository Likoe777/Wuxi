<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>送给梧栖老师的小礼物</title>
<style>
:root{
  --card-w: 260px;
  --card-h: 110px;
  --radius: 18px;
  --shadow: 0 6px 18px rgba(0,0,0,.12);
  --font: ui-sans-serif, system-ui, -apple-system, "PingFang SC","Microsoft YaHei",sans-serif;
}
html,body{margin:0;height:100%;font-family:var(--font);background:#eff0ec;}
.topbar{
  position:fixed;top:0;left:0;right:0;height:50px;
  display:flex;align-items:center;gap:8px;
  padding:0 12px;background:rgba(255,255,255,.8);backdrop-filter:blur(10px);
  z-index:20;
}
.btn{
  border:0;border-radius:999px;padding:6px 14px;font-size:14px;
  background:#111;color:#fff;cursor:pointer;
}
.btn.secondary{background:#8b8b8b;}
.stage{
  position:relative;width:100%;height:100%;padding-top:50px;overflow:hidden;
  display:flex;align-items:center;justify-content:center;
}
.center-text{
  color:#555;font-size:17px;line-height:1.5;text-align:center;
  pointer-events:none;user-select:none;max-width:80%;white-space:pre-wrap;
  transition:opacity .35s;
}
.card{
  position:absolute;width:var(--card-w);height:var(--card-h);
  display:flex;align-items:center;justify-content:center;text-align:center;
  padding:12px;border-radius:var(--radius);box-shadow:var(--shadow);
  font-size:14px;line-height:1.4;user-select:none;cursor:pointer;
  transition:transform .25s ease, opacity .25s;white-space: pre-wrap;
}
.card:hover{transform:scale(1.04);}
.modal{
  position:fixed;inset:0;display:grid;place-items:center;
  background:rgba(0,0,0,.25);z-index:30;
}
.panel{
  width:min(90vw,380px);background:#fff;border-radius:20px;
  box-shadow:var(--shadow);padding:22px;text-align:center;
}
.panel p{color:#444;line-height:1.6;margin:12px 0;font-size:16px;}
.panel .foot{display:flex;gap:10px;justify-content:center;margin-top:14px;}
</style>
</head>
<body>

<div class="topbar">
  <button id="spawn" class="btn">多看一点</button>
  <button id="clear" class="btn secondary">清空</button>
  <span style="
    margin-left: auto;
    font-size: 13px;
    color: #666;
    user-select: none;
    pointer-events: none;
  ">
    ✦ 点击单个卡片可将其关闭，或点击「清空」关闭所有卡片，点击「多看一点」生成更多卡片
  </span>
</div>


<div id="stage" class="stage">
  <div id="centerText" class="center-text">「 梧栖宝宝辛苦啦，你是特别特别棒的宝宝！ 」</div>
</div>

<div id="firstModal" class="modal">
  <div class="panel">
    <p>愿意看看我准备的小卡片吗——</p>
    <div class="foot">
      <button id="noBtn" class="btn secondary">先不要</button>
      <button id="yesBtn" class="btn">好呀！</button>
    </div>
  </div>
</div>

<script>
const tips = [
"祝我们梧栖宝宝吃好喝好睡好！\n开心很好，不开心也很好。",
  "有些时候的事与愿违说不定是另有安排呢？",
  "你并非无人问津的种子，\n而是被春天暗恋的乔木。",
  "明天会是个好天气的，如果不是的话后天，外后天，总有一天会有好天气的。",
  "小猫说，开心了就要喵喵大笑，生气了就要大声骂人，难过就要吱哇儿乱哭。",
  "看到这条消息请梧栖老师呼噜呼噜自己！",
  "如果朋友赞同你，那说明你做得很好；如果敌人指责你，说明ta被惹急了，你做得很好；如果朋友指责你，说明ta变成了敌人，敌人指责你，说明ta被惹急了，你做得很好。",
  "哪有你，你这样好。\n哪有你这样你。",
  "与其反思自己，\n不如指责他人。",
  "如果看到这个标签，那请梧栖老师看看窗外的太阳！（或者月亮，或者星星，或者雨，或者云，总而言之看看嘛看看嘛）",
  "问问小猫，梧栖宝宝是什么样的人呀？小猫说：喵！",
  "问问小狗，遇到很坏的情绪很坏的事情怎么办？小狗说：汪！",
  "请说：真是辛苦我啦！",
  "你本身就是一些人的别无替代。",
  "喜欢你喜欢你喜欢你喜欢你！超级喜欢梧栖老师！",
  "小猫说，所有人都应该喜欢小猫，\n如果不喜欢的话这个人有问题。\n来跟小猫一起说，\n所有人都应该喜欢梧栖宝宝，\n如果不喜欢的话这个人有问题"
];

const colors = [
"#F0CEAB","#F0DCD8","#E9B9C6","#E3F1E6","#9AB3A8","#D8E8D0",
"#E6B9C6","#CDE5D2","#A8C0A3","#A1C1A1","#C7D5E8","#B7D5C6",
"#E6A6AC","#B6A9C8","#DFB199","#F2CB8E","#E8C49A","#EEF7F2","#F8DF72"
];

const stage = document.getElementById('stage');
const centerText = document.getElementById('centerText');

function rand(min,max){return Math.floor(Math.random()*(max-min+1))+min;}
function pick(arr){return arr[Math.floor(Math.random()*arr.length)];}
function overlaps(r,rs){return rs.some(b=>!(r.right<b.left||r.left>b.right||r.bottom<b.top||r.top>b.bottom));}

function spawn(n){
  centerText.style.opacity = .45;

  const used = new Set([...stage.querySelectorAll(".card")].map(c=>c.textContent));
  let unused = tips.filter(t => !used.has(t));
  let pool = unused.length >= n ? unused : [...unused, ...tips].filter((v,i,a)=>a.indexOf(v)===i);
  pool = pool.sort(()=>Math.random()-0.5);
  let selected = pool.slice(0,n);

  const W = stage.clientWidth, H = stage.clientHeight;
  const rects = [...stage.querySelectorAll(".card")].map(c=>c.getBoundingClientRect());

  selected.forEach(text=>{
    const card=document.createElement("div");
    card.className="card";
    card.style.background=pick(colors);
    card.textContent=text;

    let placed=false;
    for(let tries=0;tries<35;tries++){
      const x=rand(W*0.05,W*0.72);
      const y=rand(H*0.12,H*0.75);
      card.style.left=x+"px"; card.style.top=y+"px";
      stage.appendChild(card);
      let r=card.getBoundingClientRect();
      if(!overlaps(r,rects)){rects.push(r); placed=true; break;}
      card.remove();
    }
    if(!placed) stage.appendChild(card);

    card.onclick=()=>card.remove();
  });
}

document.getElementById("spawn").onclick=()=>spawn(5);
document.getElementById("clear").onclick=()=>{
  stage.querySelectorAll(".card").forEach(c=>c.remove());
  centerText.style.opacity = 1;
};

document.getElementById("noBtn").onclick=()=>firstModal.remove();
document.getElementById("yesBtn").onclick=()=>{
  firstModal.remove();
  spawn(10);
};
</script>

</body>
</html>
